# preston-dillen-2018

This repository provides a way to track the image corpus and associated metadata as described by:

Dillen Mathias. (2018). A benchmark dataset of herbarium specimen images with label data: Summary [Data set]. Zenodo. https://doi.org/10.5281/zenodo.6372393

and associated publications using [Preston](https://preston.guoda.bio), a biodiversity dataset tracker. 

:warning: this is an experimental data repository :warning: 


## contents

```README.md``` - this file

```build.sh``` - script that tracks the image dataset and creates associated products like index.json

```data/``` - a preston data archive consisting of the summary csv and associated data

```index.json``` - a json-ld presentation of specimen metadata, generated by build.sh

## usage


### update

to update the data associated with the Dillen 2018 corpus, install Preston, jq, and re-run:

```shell
./build.sh 
```

Depending on your network connectivity and Zenodo server response times, this process may take a while. If you don't want to rely on the internet, suggest to use the clone feature described next. 


### clone
To work with a previously captured version of the image corpus (and it's associated images) locally, suggest to run:

```shell
preston clone --remote https://raw.githubusercontent.com/bio-guoda/preston-dillen-2018/main/data,https://zenodo.org
```

Please note that the associated (heavy) images are stored in Zenodo, whereas (lightweight) indexes, metadata and json snippets can be retrieved from this repository.

Alternatively, you can use git/github to clone the metadata, then retrieve the (heavy) image object from Zenodo if needed:

### find 

You can use the generated index.json to find the specimen records that you are interested in. 

For instance, you can use jq in combination with ```head``` to find the first 2 specimen record of genus ```Abelia``` 

```shell
cat index.json\
| jq --compact-output '.["@graph"][] | select(.["dwc:genus"] == "Abelia")'\
| head -n2\
| jq .
```

with expected output:

```json
{
  "dwc:basisOfRecord": "PRESERVED_SPECIMEN",
  "dwc:scientificName": "Abelia forrestii (Diels) W.W.Sm.",
  "dwc:taxonRank": "SPECIES",
  "dwc:countryCode": "CN",
  "dwc:occurrenceID": "http://data.rbge.org.uk/herb/E00633257",
  "dwc:catalogNumber": "E00633257",
  "dwc:genus": "Abelia",
  "dwc:specificEpithet": "forrestii",
  "dwc:country": "China",
  "setID": "E",
  "dcterms:identifier": "http://data.rbge.org.uk/herb/E00633257",
  "dcterms:modified": "2013-01-08",
  "dwc:otherCatalogNumbers": "BGBASE:645427",
  "dwc:collectionID": "http://biocol.org/urn:lsid:biocol.org:col:15670",
  "dwc:kingdom": "Plantae",
  "dwc:phylum": "Tracheophyta",
  "dwc:order": "Dipsacales",
  "dwc:family": "Caprifoliaceae",
  "dwc:class": "Magnoliopsida",
  "dwc:collectionCode": "E",
  "dwc:nomenclaturalCode": "ICBN",
  "dwc:institutionCode": "E",
  "dwc:higherGeography": "Inner China, Korea and Taiwan",
  "dwc:preparations": "herbarium specimen of unspecified type",
  "dc:type": "PhysicalObject",
  "dwc:datasetName": "Royal Botanic Garden Edinburgh Herbarium",
  "dwc:verbatimCoordinateSystem": "degrees minutes seconds",
  "dwc:ownerInstitutionCode": "E",
  "dcterms:language": "eng",
  "@id": "http://data.rbge.org.uk/herb/E00633257",
  "@type": "dwc:Occurrence"
}
{
  "dwc:basisOfRecord": "PRESERVED_SPECIMEN",
  "dwc:scientificName": "Abelia R.Br.",
  "dwc:taxonRank": "GENUS",
  "dwc:countryCode": "CN",
  "dwc:occurrenceID": "http://data.rbge.org.uk/herb/E00289691",
  "dwc:catalogNumber": "E00289691",
  "dwc:genus": "Abelia",
  "dwc:country": "China",
  "dwc:year": 2006,
  "dwc:eventDate": "2006-05-29",
  "dwc:locality": "Danzha Cun. In the vicinity of Zhaobitan forest farm, ca. 26.5 direct km NNW of Houqiao (Guyong).",
  "dwc:recordedBy": "Gaoligong Shan Biotic Survey Expedition - Summer 2006",
  "dwc:decimalLatitude": 25.5433,
  "dwc:decimalLongitude": 98.2222,
  "dwc:geodeticDatum": "WGS84",
  "setID": "E",
  "dwc:verbatimEventDate": "2006-05-29",
  "dwc:stateProvince": "Yunnan",
  "dcterms:identifier": "http://data.rbge.org.uk/herb/E00289691",
  "dwc:month": 5,
  "dwc:day": 29,
  "dwc:county": "Tengchong",
  "dcterms:modified": "2008-11-05",
  "dwc:recordNumber": "30809",
  "dwc:verbatimElevation": "2630 M",
  "dwc:otherCatalogNumbers": "BGBASE:299189",
  "dwc:collectionID": "http://biocol.org/urn:lsid:biocol.org:col:15670",
  "dwc:kingdom": "Plantae",
  "dwc:phylum": "Tracheophyta",
  "dwc:order": "Dipsacales",
  "dwc:family": "Caprifoliaceae",
  "dwc:class": "Magnoliopsida",
  "dwc:collectionCode": "E",
  "dwc:nomenclaturalCode": "ICBN",
  "dwc:institutionCode": "E",
  "dwc:occurrenceRemarks": "felling",
  "dwc:higherGeography": "Inner China, Korea and Taiwan",
  "dwc:startDayOfYear": 149,
  "dwc:preparations": "herbarium specimen of unspecified type",
  "dc:type": "PhysicalObject",
  "dwc:datasetName": "Royal Botanic Garden Edinburgh Herbarium",
  "dwc:elevation": 2630,
  "dwc:elevationAccuracy": 0,
  "dwc:fieldNotes": "Shrub less than 1.5 m tall. Flowers whitish yellow. Forest dominated by Lithocarpus. Growing in forest in shade.",
  "dwc:verbatimCoordinateSystem": "degrees minutes seconds",
  "dwc:ownerInstitutionCode": "E",
  "dcterms:language": "eng",
  "@id": "http://data.rbge.org.uk/herb/E00289691",
  "@type": "dwc:Occurrence"
}
```

would select all available specimen records. 

